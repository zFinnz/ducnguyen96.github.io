<!doctype html><html lang=vi-vn>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Docker Fundamentals | Thỉnh thoảng đôi lời</title>
<link rel=canonical href=/posts/backend/docker-fundamentals/>
<meta name=description content="Là nơi chia sẻ lại những kiến thức, kinh nghiệm mình tiếp thu được trong quá trình học tập và làm việc. Và thỉnh thoảng cũng đăng một vài demo ngớ ngẩn nữa :smile:">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Docker Fundamentals">
<meta property="og:description" content="Ở chương trước ta đã hoàn thành build một web server trên 1 máy chủ thuê của AWS với 1 phiên bản nginx cụ thể và mọi thứ vẫn hoạt động hoàn hảo.
Tuy nhiên, hiện tại thì nginx phụ thuộc hoàn toàn vào os mà máy chủ đang dùng. Nếu os có update lên phiên bản mới hoặc các ứng dụng khác trên os cập nhật hoặc bạn cài đặt thêm ứng dụng khác trên os gây xung đột với phiên bản nginx hiện tại thì sẽ ảnh hưởng đến sản phẩm của chúng ta.">
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/backend/docker-fundamentals/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-07-08T08:45:15+00:00">
<meta property="article:modified_time" content="2021-07-08T08:45:15+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Docker Fundamentals">
<meta name=twitter:description content="Ở chương trước ta đã hoàn thành build một web server trên 1 máy chủ thuê của AWS với 1 phiên bản nginx cụ thể và mọi thứ vẫn hoạt động hoàn hảo.
Tuy nhiên, hiện tại thì nginx phụ thuộc hoàn toàn vào os mà máy chủ đang dùng. Nếu os có update lên phiên bản mới hoặc các ứng dụng khác trên os cập nhật hoặc bạn cài đặt thêm ứng dụng khác trên os gây xung đột với phiên bản nginx hiện tại thì sẽ ảnh hưởng đến sản phẩm của chúng ta.">
<link rel=stylesheet href=/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/projects>Projects</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=/posts/devops/nginx-nen-tang-cai-dat-va-cau-hinh-nginx-cho-website-cua-ban/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=/posts/devops/aws-helper/ aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fbackend%2fdocker-fundamentals%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&text=Docker%20Fundamentals" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&title=Docker%20Fundamentals" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&is_video=false&description=Docker%20Fundamentals" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Docker%20Fundamentals&body=Check out this article: %2fposts%2fbackend%2fdocker-fundamentals%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&title=Docker%20Fundamentals" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&title=Docker%20Fundamentals" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&name=Docker%20Fundamentals&description=%e1%bb%9e%20ch%c6%b0%c6%a1ng%20tr%c6%b0%e1%bb%9bc%20ta%20%c4%91%c3%a3%20ho%c3%a0n%20th%c3%a0nh%20build%20m%e1%bb%99t%20web%20server%20tr%c3%aan%201%20m%c3%a1y%20ch%e1%bb%a7%20thu%c3%aa%20c%e1%bb%a7a%20AWS%20v%e1%bb%9bi%201%20phi%c3%aan%20b%e1%ba%a3n%20nginx%20c%e1%bb%a5%20th%e1%bb%83%20v%c3%a0%20m%e1%bb%8di%20th%e1%bb%a9%20v%e1%ba%abn%20ho%e1%ba%a1t%20%c4%91%e1%bb%99ng%20ho%c3%a0n%20h%e1%ba%a3o.%0aTuy%20nhi%c3%aan%2c%20hi%e1%bb%87n%20t%e1%ba%a1i%20th%c3%ac%20nginx%20ph%e1%bb%a5%20thu%e1%bb%99c%20ho%c3%a0n%20to%c3%a0n%20v%c3%a0o%20os%20m%c3%a0%20m%c3%a1y%20ch%e1%bb%a7%20%c4%91ang%20d%c3%b9ng.%20N%e1%ba%bfu%20os%20c%c3%b3%20update%20l%c3%aan%20phi%c3%aan%20b%e1%ba%a3n%20m%e1%bb%9bi%20ho%e1%ba%b7c%20c%c3%a1c%20%e1%bb%a9ng%20d%e1%bb%a5ng%20kh%c3%a1c%20tr%c3%aan%20os%20c%e1%ba%adp%20nh%e1%ba%adt%20ho%e1%ba%b7c%20b%e1%ba%a1n%20c%c3%a0i%20%c4%91%e1%ba%b7t%20th%c3%aam%20%e1%bb%a9ng%20d%e1%bb%a5ng%20kh%c3%a1c%20tr%c3%aan%20os%20g%c3%a2y%20xung%20%c4%91%e1%bb%99t%20v%e1%bb%9bi%20phi%c3%aan%20b%e1%ba%a3n%20nginx%20hi%e1%bb%87n%20t%e1%ba%a1i%20th%c3%ac%20s%e1%ba%bd%20%e1%ba%a3nh%20h%c6%b0%e1%bb%9fng%20%c4%91%e1%ba%bfn%20s%e1%ba%a3n%20ph%e1%ba%a9m%20c%e1%bb%a7a%20ch%c3%bang%20ta." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fbackend%2fdocker-fundamentals%2f&t=Docker%20Fundamentals" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#1-cài-đặt-docker-cho-debiandebianhttpsdocsdockercomengineinstalldebian>1. Cài đặt docker cho <a href=%5Bdebian%5D(https://docs.docker.com/engine/install/debian/)>debian</a></a></li>
<li><a href=#2-chạy-docker-với-non-root-user>2. Chạy docker với non-root user</a></li>
<li><a href=#3-tự-động-khởi-chạy-docker-service-khi-boot>3. Tự động khởi chạy docker service khi boot</a></li>
<li><a href=#4-build-docker-image-với-dockerfile>4. Build docker-image với dockerfile</a></li>
<li><a href=#5-dockerfile-với-nginx-from-source>5. Dockerfile với nginx from source</a></li>
<li><a href=#6-webapp-với-docker-image-vừa-tạo>6. Webapp với Docker Image vừa tạo</a></li>
<li><a href=#7-deploy-với-docker-image-của-web>7. Deploy với Docker Image của web</a></li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
Docker Fundamentals
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2021-07-08 08:45:15 +0000 UTC" itemprop=datePublished>2021-07-08</time>
</div>
<div class=article-category>
<i class="fas fa-archive"></i>
<a class=category-link href=/categories/backend>backend</a>
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/backend rel=tag>backend</a>
,
<a class=tag-link href=/tags/docker rel=tag>docker</a>
,
<a class=tag-link href=/tags/deploy rel=tag>deploy</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<p>Ở chương trước ta đã hoàn thành build một web server trên 1 máy chủ thuê của AWS với 1 phiên bản nginx cụ thể và mọi thứ vẫn hoạt động hoàn hảo.</p>
<p>Tuy nhiên, hiện tại thì nginx phụ thuộc hoàn toàn vào os mà máy chủ đang dùng. Nếu os có update lên phiên bản mới hoặc các ứng dụng khác trên os cập nhật hoặc bạn cài đặt thêm ứng dụng khác trên os gây xung đột với phiên bản nginx hiện tại thì sẽ ảnh hưởng đến sản phẩm của chúng ta. Docker giúp cho ta tạo các môi trường tách biệt để khỏi chạy và phát triển ứng dụng, có còn giúp chúng ta scale dễ hơn. Chi tiết về các ứng dụng của docker mình sẽ cập nhật ở 1 bài viết khác. Bài viêt này chỉ tập trung giúp các bạn có thể build được docker image, đẩy được lên repo, có thể thêm cả phần docker compose và docker stack để ploy ứng dụng.</p>
<h2 id=1-cài-đặt-docker-cho-debiandebianhttpsdocsdockercomengineinstalldebian>1. Cài đặt docker cho <a href=%5Bdebian%5D(https://docs.docker.com/engine/install/debian/)>debian</a></h2>
<p>Gỡ các phiên bản cũ</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt-get remove docker docker-engine docker.io containerd runc
</code></pre></div><p>Ta sẽ cài đặt bằng cách sử dụng repository</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># Update the apt package index and install packages to allow apt to use a repository over HTTPS:</span>
sudo apt update
sudo apt install apt-transport-https ca-certificates curl gnupg lsb-release

<span style=color:#75715e># Add Docker’s official GPG key:</span>
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

<span style=color:#75715e># Setup repository</span>
echo <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span><span style=color:#e6db74>&#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian \
</span><span style=color:#e6db74></span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74> stable&#34;</span> | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null

<span style=color:#75715e># Install Docker Engine</span>
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io
</code></pre></div><p>Kiểm tra Docker Engine đã được cài đặt chưa</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo docker run hello-world
</code></pre></div><h2 id=2-chạy-docker-với-non-root-user>2. Chạy docker với non-root user</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># Create the docker group</span>
sudo groupadd docker

<span style=color:#75715e># Add your user to the docker group</span>
sudo usermod -aG docker $USER

<span style=color:#75715e># Active changes to groups</span>
newgrp docker

<span style=color:#75715e># Verify that you can run docker commands without sudo</span>
docker run hello-world
</code></pre></div><h2 id=3-tự-động-khởi-chạy-docker-service-khi-boot>3. Tự động khởi chạy docker service khi boot</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo systemctl enable docker.service
sudo systemctl enable containerd.service
</code></pre></div><h2 id=4-build-docker-image-với-dockerfile>4. Build docker-image với dockerfile</h2>
<p>Có rất nhiều docker image được built sẵn có nginx ở trên các docker repository khác nhau, nhưng chúng ta muốn 1 bản nginx được build from source và có cấu hình như chúng ta mong muốn. Vì thế ta sẽ viết 1 dockerfile mới từ dockerfile của 1 os và sau đó build nginx from source ngay trong dockerfile.</p>
<p>Có nhiều OS có thể chạy được nginx nhưng mình sẽ chọn debian vì OS mình đang sử dụng cho website này là debian buster 10.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># Base image to start the build process</span>
From debian:buster

<span style=color:#75715e># Adds metadata to image</span>
LABEL maintainer<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ducnguyen96&#34;</span>

<span style=color:#75715e># Set the environment variables that is required to run the project</span>
ENV PORT <span style=color:#ae81ff>10001</span>

<span style=color:#75715e># Tell docker that the rest of the commands will be run in the context of the /app folder inside the image</span>
<span style=color:#75715e># Tương tự với cd tới /home</span>
WORKDIR /home

<span style=color:#75715e># RUN commands run within the container at build time</span>
<span style=color:#75715e># RUN được chạy trong quá trình build image còn CMD chạy khi RUN image</span>
<span style=color:#75715e># Sau khi cd tới /home thì tạo 1 thư mục app --&gt; /home/app</span>
RUN mkdir app

<span style=color:#75715e># ls trong home --&gt; app</span>
RUN ls

<span style=color:#75715e># RUN sh với lệnh echo $HOME --&gt; echo /root</span>
RUN /bin/bash -c <span style=color:#e6db74>&#39;echo $HOME&#39;</span>

<span style=color:#75715e># Copy toàn bộ code trong thư mục hiện tại vào /home</span>
COPY . .

<span style=color:#75715e># Định nghĩa entry cho container, các commands sau này sẽ run với entry là sh --&gt; cmd: hello.sh với entry là sh --&gt; sh hello.sh</span>
ENTRYPOINT <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;sh&#34;</span><span style=color:#f92672>]</span>

<span style=color:#75715e># CMD</span>
CMD <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;hello.sh&#34;</span><span style=color:#f92672>]</span>
</code></pre></div><p>Các phần của bản của 1 dockerfile:</p>
<ol>
<li>FROM: image base để build image mới từ nó.</li>
<li>LABEL: thêm metadata cho image.</li>
<li>ENV: thêm các biến môi trường vào image.</li>
<li>WORKDIR: tương tự như câu lệnh <code>cd</code>.</li>
<li>RUN: sau run là 1 câu lệnh thông thường mà bạn hay gõ ở terminal, RUN sẽ được chạy ngay trong quá trình build image.</li>
<li>COPY: source destination.</li>
<li>ENTRYPOINT: gắn entry cho các CMD.</li>
<li>CMD: thêm param vào cho ENTRYPOINT, nếu không có ENTRYPOINT, thì biến đầu tiên của CMD sẽ là 1 executable.</li>
</ol>
<h2 id=5-dockerfile-với-nginx-from-source>5. Dockerfile với nginx from source</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># Base image to start the build process</span>
From debian:buster

<span style=color:#75715e># Adds metadata to image</span>
LABEL maintainer<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ducnguyen96&#34;</span>

<span style=color:#75715e>#################################################</span>
<span style=color:#75715e>## Building NGINX from source &amp; Adding modules ##</span>
<span style=color:#75715e>#################################################</span>

<span style=color:#75715e># Update apt-get</span>
RUN apt-get update -y
RUN apt-get upgrade -y
RUN apt-get install wget -y

<span style=color:#75715e># Download building tools</span>
RUN apt-get install build-essential lbpcre3 <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    libpcre3-dev zliblg zliblg-dev libssl-dev -y

RUN mkdir /home/nginx
WORKDIR /home/nginx

<span style=color:#75715e># Download nginx</span>
RUN wget http://nginx.org/download/nginx-1.21.0.tar.gz
RUN tar -zxvf nginx-1.21.0.tar.gz

<span style=color:#75715e># Configure Nginx</span>
WORKDIR /home/nginx/nginx-1.21.0

RUN sh configure --sbin-path<span style=color:#f92672>=</span>/usr/bin/nginx   <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --conf-path<span style=color:#f92672>=</span>/etc/nginx/nginx.conf         <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --error-log-path<span style=color:#f92672>=</span>/var/log/nginx/error.log <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --http-log-path<span style=color:#f92672>=</span>/var/log/nginx/access.log <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --with-pcre --pid-path<span style=color:#f92672>=</span>/var/run/nginx.pid <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --with-http_ssl_module                    <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>    --modules-path<span style=color:#f92672>=</span>/etc/nginx/modules --with-http_v2_module

<span style=color:#75715e># Compile nginx</span>
RUN make

<span style=color:#75715e># Install nginx</span>
RUN make install

<span style=color:#75715e># Remove nginx source</span>
WORKDIR /home
RUN rm -rf nginx

<span style=color:#75715e># Testing nginx</span>
RUN nginx -V
</code></pre></div><p>có thể xem Dockerfile cũng như nginx.conf <a href=https://github.com/ducnguyen96/nginx-conf>tại đây</a></p>
<h2 id=6-webapp-với-docker-image-vừa-tạo>6. Webapp với Docker Image vừa tạo</h2>
<p>Sau khi build được Image debain chứa nginx được build from source, chúng ta sẽ build app của chúng ta với Image nginx kia</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>FROM ducnguyen96/nginx-debian:0.0.1

LABEL maintainer<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ducnguyen96&#34;</span>

RUN mkdir -p /home/admin/my-app/roadmap

WORKDIR /home/admin/my-app/roadmap

COPY . .

RUN mkdir -p /etc/letsencrypt/live/roadmap.fun

RUN cp fullchain.pem /etc/letsencrypt/live/roadmap.fun

RUN cp privkey.pem /etc/letsencrypt/live/roadmap.fun

RUN cp nginx.conf /etc/nginx/

STOPSIGNAL SIGTERM

CMD <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;nginx&#34;</span>, <span style=color:#e6db74>&#34;-g&#34;</span>, <span style=color:#e6db74>&#34;daemon off;&#34;</span><span style=color:#f92672>]</span>
</code></pre></div><h2 id=7-deploy-với-docker-image-của-web>7. Deploy với Docker Image của web</h2>
<p>Sau khi build xong image ta có thể đẩy lên 1 docker repo nào đấy, ở đây mình dùng <a href=https://hub.docker.com/>docker hub</a>.</p>
<ol>
<li>docker login.</li>
<li>docker push image.</li>
<li>login vào server.</li>
<li>pull image về hoặc có thể chạy docker run luôn nó sẽ tự động tải image về cho bạn.</li>
</ol>
</div>
</article>
<div class=blog-post-comments>
<div id=disqus_thread>
<script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,b='ducnguyen96',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/projects>Projects</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#1-cài-đặt-docker-cho-debiandebianhttpsdocsdockercomengineinstalldebian>1. Cài đặt docker cho <a href=%5Bdebian%5D(https://docs.docker.com/engine/install/debian/)>debian</a></a></li>
<li><a href=#2-chạy-docker-với-non-root-user>2. Chạy docker với non-root user</a></li>
<li><a href=#3-tự-động-khởi-chạy-docker-service-khi-boot>3. Tự động khởi chạy docker service khi boot</a></li>
<li><a href=#4-build-docker-image-với-dockerfile>4. Build docker-image với dockerfile</a></li>
<li><a href=#5-dockerfile-với-nginx-from-source>5. Dockerfile với nginx from source</a></li>
<li><a href=#6-webapp-với-docker-image-vừa-tạo>6. Webapp với Docker Image vừa tạo</a></li>
<li><a href=#7-deploy-với-docker-image-của-web>7. Deploy với Docker Image của web</a></li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fbackend%2fdocker-fundamentals%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&text=Docker%20Fundamentals" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&title=Docker%20Fundamentals" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&is_video=false&description=Docker%20Fundamentals" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Docker%20Fundamentals&body=Check out this article: %2fposts%2fbackend%2fdocker-fundamentals%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&title=Docker%20Fundamentals" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&title=Docker%20Fundamentals" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fbackend%2fdocker-fundamentals%2f&name=Docker%20Fundamentals&description=%e1%bb%9e%20ch%c6%b0%c6%a1ng%20tr%c6%b0%e1%bb%9bc%20ta%20%c4%91%c3%a3%20ho%c3%a0n%20th%c3%a0nh%20build%20m%e1%bb%99t%20web%20server%20tr%c3%aan%201%20m%c3%a1y%20ch%e1%bb%a7%20thu%c3%aa%20c%e1%bb%a7a%20AWS%20v%e1%bb%9bi%201%20phi%c3%aan%20b%e1%ba%a3n%20nginx%20c%e1%bb%a5%20th%e1%bb%83%20v%c3%a0%20m%e1%bb%8di%20th%e1%bb%a9%20v%e1%ba%abn%20ho%e1%ba%a1t%20%c4%91%e1%bb%99ng%20ho%c3%a0n%20h%e1%ba%a3o.%0aTuy%20nhi%c3%aan%2c%20hi%e1%bb%87n%20t%e1%ba%a1i%20th%c3%ac%20nginx%20ph%e1%bb%a5%20thu%e1%bb%99c%20ho%c3%a0n%20to%c3%a0n%20v%c3%a0o%20os%20m%c3%a0%20m%c3%a1y%20ch%e1%bb%a7%20%c4%91ang%20d%c3%b9ng.%20N%e1%ba%bfu%20os%20c%c3%b3%20update%20l%c3%aan%20phi%c3%aan%20b%e1%ba%a3n%20m%e1%bb%9bi%20ho%e1%ba%b7c%20c%c3%a1c%20%e1%bb%a9ng%20d%e1%bb%a5ng%20kh%c3%a1c%20tr%c3%aan%20os%20c%e1%ba%adp%20nh%e1%ba%adt%20ho%e1%ba%b7c%20b%e1%ba%a1n%20c%c3%a0i%20%c4%91%e1%ba%b7t%20th%c3%aam%20%e1%bb%a9ng%20d%e1%bb%a5ng%20kh%c3%a1c%20tr%c3%aan%20os%20g%c3%a2y%20xung%20%c4%91%e1%bb%99t%20v%e1%bb%9bi%20phi%c3%aan%20b%e1%ba%a3n%20nginx%20hi%e1%bb%87n%20t%e1%ba%a1i%20th%c3%ac%20s%e1%ba%bd%20%e1%ba%a3nh%20h%c6%b0%e1%bb%9fng%20%c4%91%e1%ba%bfn%20s%e1%ba%a3n%20ph%e1%ba%a9m%20c%e1%bb%a7a%20ch%c3%bang%20ta." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fbackend%2fdocker-fundamentals%2f&t=Docker%20Fundamentals" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2021 ducnguyen96
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/projects>Projects</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
</html>
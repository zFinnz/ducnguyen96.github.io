<!doctype html><html lang=vi-vn>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> RabbitMQ overview | Thỉnh thoảng đôi lời</title>
<link rel=canonical href=/posts/backend/what-is-rabbitmq/>
<meta name=description content="Là nơi chia sẻ lại những kiến thức, kinh nghiệm mình tiếp thu được trong quá trình học tập và làm việc. Và thỉnh thoảng cũng đăng một vài demo ngớ ngẩn nữa :smile:">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="RabbitMQ overview">
<meta property="og:description" content="Message Broker - Message Queue Trở lại với kiến trúc Monolithic, các components của app bó buộc chặt chẽ với nhau. Ví dụ với một ứng dụng bán lẻ, ta có một checkout service cần kết nối với inventory service thì thường sẽ được giải quyết bằng TCP connection, ngay khi checkout gửi message đến inventory thì nó cần ngay reply trước khi đến với tác vụ tiếp theo, hoặc tệ hơn nếu inventory crash thì nó sẽ cố gắng gửi request cho tới khi thiết lập connection, hoặc nếu có rất nhiều checkouts xảy ra cùng lúc thì inventory service không thể theo kịp.">
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/backend/what-is-rabbitmq/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-10-07T00:00:00+00:00">
<meta property="article:modified_time" content="2021-10-07T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="RabbitMQ overview">
<meta name=twitter:description content="Message Broker - Message Queue Trở lại với kiến trúc Monolithic, các components của app bó buộc chặt chẽ với nhau. Ví dụ với một ứng dụng bán lẻ, ta có một checkout service cần kết nối với inventory service thì thường sẽ được giải quyết bằng TCP connection, ngay khi checkout gửi message đến inventory thì nó cần ngay reply trước khi đến với tác vụ tiếp theo, hoặc tệ hơn nếu inventory crash thì nó sẽ cố gắng gửi request cho tới khi thiết lập connection, hoặc nếu có rất nhiều checkouts xảy ra cùng lúc thì inventory service không thể theo kịp.">
<link rel=stylesheet href=/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/projects/cv>CV</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=/posts/backend/using-grpc-in-production-keep-alive/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&text=RabbitMQ%20overview" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&title=RabbitMQ%20overview" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&is_video=false&description=RabbitMQ%20overview" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=RabbitMQ%20overview&body=Check out this article: %2fposts%2fbackend%2fwhat-is-rabbitmq%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&title=RabbitMQ%20overview" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&title=RabbitMQ%20overview" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&name=RabbitMQ%20overview&description=Message%20Broker%20-%20Message%20Queue%20Tr%e1%bb%9f%20l%e1%ba%a1i%20v%e1%bb%9bi%20ki%e1%ba%bfn%20tr%c3%bac%20Monolithic%2c%20c%c3%a1c%20components%20c%e1%bb%a7a%20app%20b%c3%b3%20bu%e1%bb%99c%20ch%e1%ba%b7t%20ch%e1%ba%bd%20v%e1%bb%9bi%20nhau.%20V%c3%ad%20d%e1%bb%a5%20v%e1%bb%9bi%20m%e1%bb%99t%20%e1%bb%a9ng%20d%e1%bb%a5ng%20b%c3%a1n%20l%e1%ba%bb%2c%20ta%20c%c3%b3%20m%e1%bb%99t%20checkout%20service%20c%e1%ba%a7n%20k%e1%ba%bft%20n%e1%bb%91i%20v%e1%bb%9bi%20inventory%20service%20th%c3%ac%20th%c6%b0%e1%bb%9dng%20s%e1%ba%bd%20%c4%91%c6%b0%e1%bb%a3c%20gi%e1%ba%a3i%20quy%e1%ba%bft%20b%e1%ba%b1ng%20TCP%20connection%2c%20ngay%20khi%20checkout%20g%e1%bb%adi%20message%20%c4%91%e1%ba%bfn%20inventory%20th%c3%ac%20n%c3%b3%20c%e1%ba%a7n%20ngay%20reply%20tr%c6%b0%e1%bb%9bc%20khi%20%c4%91%e1%ba%bfn%20v%e1%bb%9bi%20t%c3%a1c%20v%e1%bb%a5%20ti%e1%ba%bfp%20theo%2c%20ho%e1%ba%b7c%20t%e1%bb%87%20h%c6%a1n%20n%e1%ba%bfu%20inventory%20crash%20th%c3%ac%20n%c3%b3%20s%e1%ba%bd%20c%e1%bb%91%20g%e1%ba%afng%20g%e1%bb%adi%20request%20cho%20t%e1%bb%9bi%20khi%20thi%e1%ba%bft%20l%e1%ba%adp%20connection%2c%20ho%e1%ba%b7c%20n%e1%ba%bfu%20c%c3%b3%20r%e1%ba%a5t%20nhi%e1%bb%81u%20checkouts%20x%e1%ba%a3y%20ra%20c%c3%b9ng%20l%c3%bac%20th%c3%ac%20inventory%20service%20kh%c3%b4ng%20th%e1%bb%83%20theo%20k%e1%bb%8bp." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&t=RabbitMQ%20overview" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#message-broker---message-queue>Message Broker - Message Queue</a></li>
<li><a href=#rabbitmq>RabbitMQ</a></li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
RabbitMQ overview
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2021-10-07 00:00:00 +0000 UTC" itemprop=datePublished>2021-10-07</time>
</div>
<div class=article-category>
<i class="fas fa-archive"></i>
<a class=category-link href=/categories/backend>backend</a>
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/backend rel=tag>backend</a>
,
<a class=tag-link href=/tags/microservices rel=tag>microservices</a>
,
<a class=tag-link href=/tags/rabbitmq rel=tag>rabbitmq</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<h2 id=message-broker---message-queue>Message Broker - Message Queue</h2>
<p>Trở lại với kiến trúc Monolithic, các components của app bó buộc chặt chẽ với nhau. Ví dụ với một ứng dụng bán lẻ, ta có một checkout service cần kết nối với inventory service thì thường sẽ được giải quyết bằng TCP connection, ngay khi checkout gửi message đến inventory thì nó cần ngay reply trước khi đến với tác vụ tiếp theo, hoặc tệ hơn nếu inventory crash thì nó sẽ cố gắng gửi request cho tới khi thiết lập connection, hoặc nếu có rất nhiều checkouts xảy ra cùng lúc thì inventory service không thể theo kịp.</p>
<ul>
<li>Decouple</li>
</ul>
<p>Và đó là lúc message queue được tạo ra, nó sẽ đứng giữa 2 service cần giao tiếp với nhau (chẳng hạn checkout service và inventory service). Lúc này checkout message sẽ gửi 1 message đến broker và thực hiện tác vụ khác ngay. Inventory sau khi đã sẵn sàng thì có thể consume message đó, process theo message và ngay lập tức consume message tiếp theo. MQ giúp tách biệt 2 service ra.</p>
<ul>
<li>Scalable</li>
</ul>
<p>Đồng thời nó cũng giúp scale app của bạn, ví dụ nếu số checkout tăng lên quá nhiều thì bạn có thể tăng số instances của inventory lên và số lượng message cho mỗi instance sẽ giảm xuống.</p>
<ul>
<li>Performant</li>
</ul>
<p>MQ có thể được đặt ở 1 máy riêng, nó có thể giảm tải cho các tác vụ mà hoàn thành bởi web app giúp app đạt performence tốt hơn.</p>
<h2 id=rabbitmq>RabbitMQ</h2>
<p>Là một triển khai của AMQP(Advanced Message Queueing Protocol) message model - 091.</p>
<p>Thay vì gửi message trực tiếp đến message queue, nó sẽ gửi đến một exchange. Một exchange có thể kết nối đến nhiều queue và mỗi queue có thể kết nối đến các services khác nhau.</p>
<p>Service gửi message đến exchange &ndash;> exchange được kết nối với các queues qua các connections được gọi là bindings được ref bởi binding key. Các consumer sẽ subsribe đến các queues để lắng nghe message. RabbitMQ là hệ thống bao gồm exchange và các queue, RabbitMQ rất linh hoạt nhờ các loại exchanges khác nhau mà nó hỗ trợ.</p>
<ul>
<li>Fanout exchange: Message được gửi từ service sẽ được duplicate và gửi đến tất cả các queues.</li>
<li>Direct exchange: Message được gửi từ service chứa routing key, nó sẽ được map với binding key để chuyển tới queue.</li>
<li>Topic exchange: Giống với direct exchange nhưng nó có thể match từng phần (partial match) chẳng hạn &ldquo;ship.shoes&rdquo; và &ldquo;ship.any&rdquo;</li>
<li>Header exchange: Routing key sẽ bị bỏ qua và message được route theo header.</li>
<li>Default exchange: Routing key match với tên của queue.</li>
</ul>
<p>Cách gửi và nhận message trong RabbitMQ được defined bằng metadata là các key và loại exchange nên app và developer có thể control nhiều hơn.</p>
<ul>
<li>Cloudy friendly: Có thể deploy bằng container, deploy như 1 cluster.</li>
<li>Cross-language: Ví dụ có thể produce bằng Go và consume bằng JS, Python,&mldr;</li>
<li>Security: Support FASL, LDAP, TLS</li>
<li>Acks: Comsumer ack message giúp broker biết rằng consumer đã nhận được message, và loại bỏ nó ra khỏi queue. Điều này tránh tình trạng miss message hoặc loss message vì nếu consumer không ack thì message vẫn được giữ trong queue.</li>
<li>Greate management: Có management UI, CLI.</li>
<li>Plug-in: Có rất nhiều plug-ins được phát triển bởi cộng đồng opensource.</li>
</ul>
<p><em>Nguồn</em>: <a href="https://www.youtube.com/watch?v=7rkeORD4jSw">https://www.youtube.com/watch?v=7rkeORD4jSw</a></p>
</div>
</article>
<div class=blog-post-comments>
<div id=disqus_thread>
<script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,b='ducnguyen96',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/projects/cv>CV</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#message-broker---message-queue>Message Broker - Message Queue</a></li>
<li><a href=#rabbitmq>RabbitMQ</a></li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&text=RabbitMQ%20overview" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&title=RabbitMQ%20overview" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&is_video=false&description=RabbitMQ%20overview" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=RabbitMQ%20overview&body=Check out this article: %2fposts%2fbackend%2fwhat-is-rabbitmq%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&title=RabbitMQ%20overview" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&title=RabbitMQ%20overview" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&name=RabbitMQ%20overview&description=Message%20Broker%20-%20Message%20Queue%20Tr%e1%bb%9f%20l%e1%ba%a1i%20v%e1%bb%9bi%20ki%e1%ba%bfn%20tr%c3%bac%20Monolithic%2c%20c%c3%a1c%20components%20c%e1%bb%a7a%20app%20b%c3%b3%20bu%e1%bb%99c%20ch%e1%ba%b7t%20ch%e1%ba%bd%20v%e1%bb%9bi%20nhau.%20V%c3%ad%20d%e1%bb%a5%20v%e1%bb%9bi%20m%e1%bb%99t%20%e1%bb%a9ng%20d%e1%bb%a5ng%20b%c3%a1n%20l%e1%ba%bb%2c%20ta%20c%c3%b3%20m%e1%bb%99t%20checkout%20service%20c%e1%ba%a7n%20k%e1%ba%bft%20n%e1%bb%91i%20v%e1%bb%9bi%20inventory%20service%20th%c3%ac%20th%c6%b0%e1%bb%9dng%20s%e1%ba%bd%20%c4%91%c6%b0%e1%bb%a3c%20gi%e1%ba%a3i%20quy%e1%ba%bft%20b%e1%ba%b1ng%20TCP%20connection%2c%20ngay%20khi%20checkout%20g%e1%bb%adi%20message%20%c4%91%e1%ba%bfn%20inventory%20th%c3%ac%20n%c3%b3%20c%e1%ba%a7n%20ngay%20reply%20tr%c6%b0%e1%bb%9bc%20khi%20%c4%91%e1%ba%bfn%20v%e1%bb%9bi%20t%c3%a1c%20v%e1%bb%a5%20ti%e1%ba%bfp%20theo%2c%20ho%e1%ba%b7c%20t%e1%bb%87%20h%c6%a1n%20n%e1%ba%bfu%20inventory%20crash%20th%c3%ac%20n%c3%b3%20s%e1%ba%bd%20c%e1%bb%91%20g%e1%ba%afng%20g%e1%bb%adi%20request%20cho%20t%e1%bb%9bi%20khi%20thi%e1%ba%bft%20l%e1%ba%adp%20connection%2c%20ho%e1%ba%b7c%20n%e1%ba%bfu%20c%c3%b3%20r%e1%ba%a5t%20nhi%e1%bb%81u%20checkouts%20x%e1%ba%a3y%20ra%20c%c3%b9ng%20l%c3%bac%20th%c3%ac%20inventory%20service%20kh%c3%b4ng%20th%e1%bb%83%20theo%20k%e1%bb%8bp." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fbackend%2fwhat-is-rabbitmq%2f&t=RabbitMQ%20overview" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2021 ducnguyen96
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href=/projects/cv>CV</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
</html>
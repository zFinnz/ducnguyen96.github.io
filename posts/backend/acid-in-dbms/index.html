<!doctype html><html lang=vi-vn>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> ACID trong cơ sở dữ liệu | Thỉnh thoảng đôi lời</title>
<link rel=canonical href=/posts/backend/acid-in-dbms/>
<meta name=description content="Là nơi chia sẻ lại những kiến thức, kinh nghiệm mình tiếp thu được trong quá trình học tập và làm việc. Và thỉnh thoảng cũng đăng một vài demo ngớ ngẩn nữa :smile:">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="ACID trong cơ sở dữ liệu">
<meta property="og:description" content="Transaction là một đơn vị logic nó thực hiện việc truy xuất và chỉnh sửa nội dung của database. Để duy trì tính thống nhất cả database trước và sau khi thực hiện transaction thì cần tuân theo một số tính chất và được viết tắt là ACID
Atomicity (/æt.əˈmɪs.ɪ.ti/) và Consistency Yêu cầu transaction phải thực hiện 1 cách hoàn chỉnh hoặc là không thực hiện, chứ không có việc chỉ thực hiện 1 phần.">
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/backend/acid-in-dbms/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-24T10:00:27+00:00">
<meta property="article:modified_time" content="2021-08-24T10:00:27+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="ACID trong cơ sở dữ liệu">
<meta name=twitter:description content="Transaction là một đơn vị logic nó thực hiện việc truy xuất và chỉnh sửa nội dung của database. Để duy trì tính thống nhất cả database trước và sau khi thực hiện transaction thì cần tuân theo một số tính chất và được viết tắt là ACID
Atomicity (/æt.əˈmɪs.ɪ.ti/) và Consistency Yêu cầu transaction phải thực hiện 1 cách hoàn chỉnh hoặc là không thực hiện, chứ không có việc chỉ thực hiện 1 phần.">
<link rel=stylesheet href=/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=/posts/os/snap-in-a-nutshell/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=/posts/backend/transaction-in-a-nutshell/ aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fbackend%2facid-in-dbms%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fbackend%2facid-in-dbms%2f&text=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fbackend%2facid-in-dbms%2f&title=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fbackend%2facid-in-dbms%2f&is_video=false&description=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u&body=Check out this article: %2fposts%2fbackend%2facid-in-dbms%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fbackend%2facid-in-dbms%2f&title=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fbackend%2facid-in-dbms%2f&title=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fbackend%2facid-in-dbms%2f&name=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u&description=Transaction%20l%c3%a0%20m%e1%bb%99t%20%c4%91%c6%a1n%20v%e1%bb%8b%20logic%20n%c3%b3%20th%e1%bb%b1c%20hi%e1%bb%87n%20vi%e1%bb%87c%20truy%20xu%e1%ba%a5t%20v%c3%a0%20ch%e1%bb%89nh%20s%e1%bb%ada%20n%e1%bb%99i%20dung%20c%e1%bb%a7a%20database.%20%c4%90%e1%bb%83%20duy%20tr%c3%ac%20t%c3%adnh%20th%e1%bb%91ng%20nh%e1%ba%a5t%20c%e1%ba%a3%20database%20tr%c6%b0%e1%bb%9bc%20v%c3%a0%20sau%20khi%20th%e1%bb%b1c%20hi%e1%bb%87n%20transaction%20th%c3%ac%20c%e1%ba%a7n%20tu%c3%a2n%20theo%20m%e1%bb%99t%20s%e1%bb%91%20t%c3%adnh%20ch%e1%ba%a5t%20v%c3%a0%20%c4%91%c6%b0%e1%bb%a3c%20vi%e1%ba%bft%20t%e1%ba%aft%20l%c3%a0%20ACID%0aAtomicity%20%28%2f%c3%a6t.%c9%99%cb%88m%c9%aas.%c9%aa.ti%2f%29%20v%c3%a0%20Consistency%20Y%c3%aau%20c%e1%ba%a7u%20transaction%20ph%e1%ba%a3i%20th%e1%bb%b1c%20hi%e1%bb%87n%201%20c%c3%a1ch%20ho%c3%a0n%20ch%e1%bb%89nh%20ho%e1%ba%b7c%20l%c3%a0%20kh%c3%b4ng%20th%e1%bb%b1c%20hi%e1%bb%87n%2c%20ch%e1%bb%a9%20kh%c3%b4ng%20c%c3%b3%20vi%e1%bb%87c%20ch%e1%bb%89%20th%e1%bb%b1c%20hi%e1%bb%87n%201%20ph%e1%ba%a7n." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fbackend%2facid-in-dbms%2f&t=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#atomicity-ætəˈmɪsɪti-và-consistency>Atomicity (/æt.əˈmɪs.ɪ.ti/) và Consistency</a></li>
<li><a href=#isolation>Isolation</a></li>
<li><a href=#durability>Durability</a></li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
ACID trong cơ sở dữ liệu
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2021-08-24 10:00:27 +0000 UTC" itemprop=datePublished>2021-08-24</time>
</div>
<div class=article-category>
<i class="fas fa-archive"></i>
<a class=category-link href=/categories/backend>backend</a>
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/backend rel=tag>backend</a>
,
<a class=tag-link href=/tags/acid rel=tag>acid</a>
,
<a class=tag-link href=/tags/database rel=tag>database</a>
,
<a class=tag-link href=/tags/db rel=tag>db</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<p><strong>Transaction là một đơn vị logic nó thực hiện việc truy xuất và chỉnh sửa nội dung của database. Để duy trì tính thống nhất cả database trước và sau khi thực hiện transaction thì cần tuân theo một số tính chất và được viết tắt là ACID</strong></p>
<h2 id=atomicity-ætəˈmɪsɪti-và-consistency>Atomicity (/æt.əˈmɪs.ɪ.ti/) và Consistency</h2>
<p>Yêu cầu transaction phải thực hiện 1 cách hoàn chỉnh hoặc là không thực hiện, chứ không có việc chỉ thực hiện 1 phần.</p>
<p>Nó liên quan đến 2 thứ:</p>
<ul>
<li><strong>Abort</strong>: Nếu 1 transaction bị hủy bỏ thì những thay đổi đã được thực hiện sẽ không còn nữa.</li>
<li><strong>Commit</strong>: Nếu 1 transaction được commit thì những thay đổi sẽ được ghi lại.</li>
</ul>
<p>2 tính chất này nó liên quan chặt chẽ đến nhau.</p>
<p>Ví dụ bạn có 2 table: <code>product_templates</code> và <code>products</code> với relation là <code>One-To-Many</code> 1 product template có nhiều products con. product_template có 1 trường là <code>min_price</code> là giá trị thấp nhất trong tất cả các <code>price</code> là thuộc tính của products.</p>
<p>Ta thực hiện 1 transaction thực hiện 2 việc là <code>delete product</code> và <code>update min_price</code>. Nếu transaction đó sau khi thực hiện việc delete product và bị lỗi thì data sẽ không còn đúng nữa.</p>
<h2 id=isolation>Isolation</h2>
<p>Thuộc tính này đảm bảo rằng có nhiều transaction có thể thực hiện đồng thời mà không dẫn đến database không còn nhất quán. Các transactions phải được thực thi một cách độc lập mà không có bất cứ sự can thiệp nào. Những thay đổi từ 1 transaction thì sẽ không được thấy ở các transcations khác cho đến khi những thay đổi ấy được ghi vào bộ nhớ hoặc đã được commited.</p>
<p>Ví dụ: ta có X = 10, Y = 5 và 2 transaction T và T'</p>
<table>
<thead>
<tr>
<th style=text-align:center>T</th>
<th style=text-align:center>T'</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>Read(X)</td>
<td style=text-align:center>Read(X)</td>
</tr>
<tr>
<td style=text-align:center>X:= X*10</td>
<td style=text-align:center>Read(Y)</td>
</tr>
<tr>
<td style=text-align:center>Write(X)</td>
<td style=text-align:center>Z:=X+Y</td>
</tr>
<tr>
<td style=text-align:center>Read(Y)</td>
<td style=text-align:center>Write(Z)</td>
</tr>
<tr>
<td style=text-align:center>Y:=Y-2</td>
<td></td>
</tr>
<tr>
<td style=text-align:center>Write(Y)</td>
<td></td>
</tr>
</tbody>
</table>
<p>Ở ví dụ trên nếu transaction T thực hiện xong bước Write(X) và transaction T' bắt đầu, nếu không đảm bảo tính cô lập của các transaction thì X ở T' sẽ có giá trị là 100 trong khi Y vẫn là 5 dẫn tới Z = 50 + 5 = 55. Trong khi đáng lẽ Z = 10 + 5 = 15 hoặc Z = 100 + 3 = 103</p>
<h2 id=durability>Durability</h2>
<p>Tính chất này đảm bảo rằng 1 khi mà transaction đã thực thi xong thì những thay đổi đến database sẽ được ghi vào ổ đĩa và chúng vẫn sẽ được dữ ngay cả khi có 1 lỗi hệ thống xảy ra chẳng hạn như lỗi phần mềm hoặc là mất điện 😢. (Committed Data is never lost)</p>
</div>
</article>
<div class=blog-post-comments>
<div id=disqus_thread>
<script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,b='ducnguyen96',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#atomicity-ætəˈmɪsɪti-và-consistency>Atomicity (/æt.əˈmɪs.ɪ.ti/) và Consistency</a></li>
<li><a href=#isolation>Isolation</a></li>
<li><a href=#durability>Durability</a></li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fbackend%2facid-in-dbms%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fbackend%2facid-in-dbms%2f&text=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fbackend%2facid-in-dbms%2f&title=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fbackend%2facid-in-dbms%2f&is_video=false&description=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u&body=Check out this article: %2fposts%2fbackend%2facid-in-dbms%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fbackend%2facid-in-dbms%2f&title=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fbackend%2facid-in-dbms%2f&title=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fbackend%2facid-in-dbms%2f&name=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u&description=Transaction%20l%c3%a0%20m%e1%bb%99t%20%c4%91%c6%a1n%20v%e1%bb%8b%20logic%20n%c3%b3%20th%e1%bb%b1c%20hi%e1%bb%87n%20vi%e1%bb%87c%20truy%20xu%e1%ba%a5t%20v%c3%a0%20ch%e1%bb%89nh%20s%e1%bb%ada%20n%e1%bb%99i%20dung%20c%e1%bb%a7a%20database.%20%c4%90%e1%bb%83%20duy%20tr%c3%ac%20t%c3%adnh%20th%e1%bb%91ng%20nh%e1%ba%a5t%20c%e1%ba%a3%20database%20tr%c6%b0%e1%bb%9bc%20v%c3%a0%20sau%20khi%20th%e1%bb%b1c%20hi%e1%bb%87n%20transaction%20th%c3%ac%20c%e1%ba%a7n%20tu%c3%a2n%20theo%20m%e1%bb%99t%20s%e1%bb%91%20t%c3%adnh%20ch%e1%ba%a5t%20v%c3%a0%20%c4%91%c6%b0%e1%bb%a3c%20vi%e1%ba%bft%20t%e1%ba%aft%20l%c3%a0%20ACID%0aAtomicity%20%28%2f%c3%a6t.%c9%99%cb%88m%c9%aas.%c9%aa.ti%2f%29%20v%c3%a0%20Consistency%20Y%c3%aau%20c%e1%ba%a7u%20transaction%20ph%e1%ba%a3i%20th%e1%bb%b1c%20hi%e1%bb%87n%201%20c%c3%a1ch%20ho%c3%a0n%20ch%e1%bb%89nh%20ho%e1%ba%b7c%20l%c3%a0%20kh%c3%b4ng%20th%e1%bb%b1c%20hi%e1%bb%87n%2c%20ch%e1%bb%a9%20kh%c3%b4ng%20c%c3%b3%20vi%e1%bb%87c%20ch%e1%bb%89%20th%e1%bb%b1c%20hi%e1%bb%87n%201%20ph%e1%ba%a7n." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fbackend%2facid-in-dbms%2f&t=ACID%20trong%20c%c6%a1%20s%e1%bb%9f%20d%e1%bb%af%20li%e1%bb%87u" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2021 ducnguyen96
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
</html>
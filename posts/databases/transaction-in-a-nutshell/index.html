<!doctype html><html lang=vi-vn>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Transaction in a nutshell | Thá»‰nh thoáº£ng Ä‘Ã´i lá»i</title>
<link rel=canonical href=/posts/databases/transaction-in-a-nutshell/>
<meta name=description content="LÃ  nÆ¡i chia sáº» láº¡i nhá»¯ng kiáº¿n thá»©c, kinh nghiá»‡m mÃ¬nh tiáº¿p thu Ä‘Æ°á»£c trong quÃ¡ trÃ¬nh há»c táº­p vÃ  lÃ m viá»‡c. VÃ  thá»‰nh thoáº£ng cÅ©ng Ä‘Äƒng má»™t vÃ i demo ngá»› ngáº©n ná»¯a :smile:">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Transaction in a nutshell">
<meta property="og:description" content="Transaction cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  1 nhÃ³m task. Má»™t task Ä‘Æ¡n láº» lÃ  1 Ä‘Æ¡n vá»‹ xá»­ lÃ½ mÃ  khÃ´ng thá»ƒ chia nhá» hÆ¡n ná»¯a.
Láº¥y má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n. Giáº£ sá»­ má»™t nhÃ¢n viÃªn ngÃ¢n hÃ ng chuyá»ƒn 500 triá»‡u tá»« tÃ i khoáº£n A Ä‘áº¿n tÃ i khoáº£n B. ÄÃ¢y lÃ  má»™t transaction Ä‘Æ¡n giáº£n chá»©a nhá»¯ng task sau Ä‘Ã¢y.
A&rsquo;s Account
Open_Account(A) Old_Balance = A.balance New_Balance = Old_Balance - 500 A.">
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/databases/transaction-in-a-nutshell/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-08-25T00:00:00+00:00">
<meta property="article:modified_time" content="2021-08-25T00:00:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Transaction in a nutshell">
<meta name=twitter:description content="Transaction cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  1 nhÃ³m task. Má»™t task Ä‘Æ¡n láº» lÃ  1 Ä‘Æ¡n vá»‹ xá»­ lÃ½ mÃ  khÃ´ng thá»ƒ chia nhá» hÆ¡n ná»¯a.
Láº¥y má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n. Giáº£ sá»­ má»™t nhÃ¢n viÃªn ngÃ¢n hÃ ng chuyá»ƒn 500 triá»‡u tá»« tÃ i khoáº£n A Ä‘áº¿n tÃ i khoáº£n B. ÄÃ¢y lÃ  má»™t transaction Ä‘Æ¡n giáº£n chá»©a nhá»¯ng task sau Ä‘Ã¢y.
A&rsquo;s Account
Open_Account(A) Old_Balance = A.balance New_Balance = Old_Balance - 500 A.">
<link rel=stylesheet href=/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=/posts/databases/acid-in-dbms/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=/posts/databases/database-indexing/ aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&text=Transaction%20in%20a%20nutshell" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&title=Transaction%20in%20a%20nutshell" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&is_video=false&description=Transaction%20in%20a%20nutshell" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Transaction%20in%20a%20nutshell&body=Check out this article: %2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&title=Transaction%20in%20a%20nutshell" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&title=Transaction%20in%20a%20nutshell" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&name=Transaction%20in%20a%20nutshell&description=Transaction%20c%c3%b3%20th%e1%bb%83%20%c4%91%c6%b0%e1%bb%a3c%20%c4%91%e1%bb%8bnh%20ngh%c4%a9a%20l%c3%a0%201%20nh%c3%b3m%20task.%20M%e1%bb%99t%20task%20%c4%91%c6%a1n%20l%e1%ba%bb%20l%c3%a0%201%20%c4%91%c6%a1n%20v%e1%bb%8b%20x%e1%bb%ad%20l%c3%bd%20m%c3%a0%20kh%c3%b4ng%20th%e1%bb%83%20chia%20nh%e1%bb%8f%20h%c6%a1n%20n%e1%bb%afa.%0aL%e1%ba%a5y%20m%e1%bb%99t%20v%c3%ad%20d%e1%bb%a5%20%c4%91%c6%a1n%20gi%e1%ba%a3n.%20Gi%e1%ba%a3%20s%e1%bb%ad%20m%e1%bb%99t%20nh%c3%a2n%20vi%c3%aan%20ng%c3%a2n%20h%c3%a0ng%20chuy%e1%bb%83n%20500%20tri%e1%bb%87u%20t%e1%bb%ab%20t%c3%a0i%20kho%e1%ba%a3n%20A%20%c4%91%e1%ba%bfn%20t%c3%a0i%20kho%e1%ba%a3n%20B.%20%c4%90%c3%a2y%20l%c3%a0%20m%e1%bb%99t%20transaction%20%c4%91%c6%a1n%20gi%e1%ba%a3n%20ch%e1%bb%a9a%20nh%e1%bb%afng%20task%20sau%20%c4%91%c3%a2y.%0aA%26rsquo%3bs%20Account%0aOpen_Account%28A%29%20Old_Balance%20%3d%20A.balance%20New_Balance%20%3d%20Old_Balance%20-%20500%20A." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&t=Transaction%20in%20a%20nutshell" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<nav id=TableOfContents>
<ul>
<li><a href=#1-states-cá»§a-transactions>1. States cá»§a Transactions</a></li>
<li><a href=#2-schedules-lÃ -gÃ¬->2. Schedules lÃ  gÃ¬ ?</a></li>
<li><a href=#3-serializability>3. Serializability</a></li>
<li><a href=#4-equivalence-schedules---cÃ¡c-tÃ­nh-cháº¥t-tÆ°Æ¡ng-Ä‘Æ°Æ¡ng-giá»¯a-schedules>4. Equivalence Schedules - CÃ¡c tÃ­nh cháº¥t tÆ°Æ¡ng Ä‘Æ°Æ¡ng giá»¯a schedules</a></li>
<li><a href=#4-mÃ¬nh-hay-dÃ¹ng-postgres-váº­y-postgres-thÃ¬-serializability-nhÆ°-tháº¿-nÃ o->4. MÃ¬nh hay dÃ¹ng postgres, váº­y postgres thÃ¬ serializability nhÆ° tháº¿ nÃ o ?</a></li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
Transaction in a nutshell
</h1>
<div class=meta>
<div class=postdate>
<time datetime="2021-08-25 00:00:00 +0000 UTC" itemprop=datePublished>2021-08-25</time>
</div>
<div class=article-category>
<i class="fas fa-archive"></i>
<a class=category-link href=/categories/database>database</a>
,
<a class=category-link href=/categories/backend>backend</a>
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/backend rel=tag>backend</a>
,
<a class=tag-link href=/tags/database rel=tag>database</a>
,
<a class=tag-link href=/tags/transaction rel=tag>transaction</a>
,
<a class=tag-link href=/tags/dbms rel=tag>dbms</a>
,
<a class=tag-link href=/tags/schedule rel=tag>schedule</a>
,
<a class=tag-link href=/tags/serial-schedule rel=tag>serial schedule</a>
,
<a class=tag-link href=/tags/non-serial rel=tag>non-serial</a>
,
<a class=tag-link href=/tags/serializability rel=tag>serializability</a>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<p><em>Transaction cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a lÃ  1 nhÃ³m task. Má»™t task Ä‘Æ¡n láº» lÃ  1 Ä‘Æ¡n vá»‹ xá»­ lÃ½ mÃ  khÃ´ng thá»ƒ chia nhá» hÆ¡n ná»¯a.</em></p>
<p><em>Láº¥y má»™t vÃ­ dá»¥ Ä‘Æ¡n giáº£n. Giáº£ sá»­ má»™t nhÃ¢n viÃªn ngÃ¢n hÃ ng chuyá»ƒn 500 triá»‡u tá»« tÃ i khoáº£n A Ä‘áº¿n tÃ i khoáº£n B. ÄÃ¢y lÃ  má»™t transaction Ä‘Æ¡n giáº£n chá»©a nhá»¯ng task sau Ä‘Ã¢y.</em></p>
<p><strong>A&rsquo;s Account</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>Open_Account<span style=color:#f92672>(</span>A<span style=color:#f92672>)</span>
Old_Balance <span style=color:#f92672>=</span> A.balance
New_Balance <span style=color:#f92672>=</span> Old_Balance - <span style=color:#ae81ff>500</span>
A.balance <span style=color:#f92672>=</span> New_Balance
Close_Account<span style=color:#f92672>(</span>A<span style=color:#f92672>)</span>
</code></pre></div><p><strong>B&rsquo;s Account</strong></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>Open_Account<span style=color:#f92672>(</span>B<span style=color:#f92672>)</span>
Old_Balance <span style=color:#f92672>=</span> B.balance
New_Balance <span style=color:#f92672>=</span> Old_Balance + <span style=color:#ae81ff>500</span>
B.balance <span style=color:#f92672>=</span> New_Balance
Close_Account<span style=color:#f92672>(</span>B<span style=color:#f92672>)</span>
</code></pre></div><p>Má»™t transaction pháº£i duy trÃ¬ Ä‘Æ°á»£c cÃ¡c thuá»™c tÃ­nh <a href=/posts/backend/acid-in-dbms/>ACID</a> Ä‘á»ƒm Ä‘áº£m báº£o Ä‘á»™ chÃ­nh xÃ¡c, tÃ­nh nguyÃªn váº¹n cá»§a database.</p>
<h2 id=1-states-cá»§a-transactions>1. States cá»§a Transactions</h2>
<p><img src=/images/transaction_states.png alt=state-of-transaction></p>
<ul>
<li><strong>Active</strong>: Transaction báº¯t Ä‘áº§u Ä‘Æ°á»£c thá»±c thi, Ä‘Ã¢y lÃ  tráº¡ng thÃ¡i khá»Ÿi Ä‘áº§u cá»§a táº¥t cáº£ cÃ¡c transcation.</li>
<li><strong>Partially Committed</strong>: Má»™t transaction sáº½ thá»±c hiá»‡n nhiá»u task, vÃ  khi task cuá»‘i cÃ¹ng Ä‘Æ°á»£c thá»±c hiá»‡n thÃ¬ transaction sáº½ Ä‘Æ°á»£c xem lÃ  á»Ÿ tráº¡ng thÃ¡i nÃ y.</li>
<li><strong>Failed</strong>: Báº¥t cá»© kiá»ƒm tra nÃ o tá»« database bá»‹ bÃ¡o lá»—i thÃ¬ transaction sáº½ á»Ÿ tráº¡ng thÃ¡i nÃ y vÃ  sáº½ khÃ´ng thá»ƒ Ä‘Æ°á»£c xá»­ lÃ½ tiáº¿p.</li>
<li><strong>Aborted</strong>: Khi transaction Ä‘áº¡t tráº¡ng thÃ¡i failed thÃ¬ database sáº½ rolls back láº¡i táº¥t cáº£ nhá»¯ng task thá»±c hiá»‡n viá»‡c ghi dá»¯ liá»‡u, Ä‘á»ƒ Ä‘Æ°a database Ä‘áº¡t láº¡i tráº¡ng thÃ¡i trÆ°á»›c khi transaction Ä‘Æ°á»£c thá»±c thi hoáº·c lÃ  re-start láº¡i transaction.</li>
<li><strong>Committed</strong>: Náº¿u táº¥t cáº£ cÃ¡c task cá»§a transaction Ä‘Æ°á»£c thá»±c hiá»‡n thÃ nh cÃ´ng thÃ¬ transaction Ä‘áº¡t tráº¡ng thÃ¡i nÃ y, vÃ  nhá»¯ng thay Ä‘á»•i Ä‘áº¿n database sáº½ Ä‘Æ°á»£c lÆ°u vÄ©nh viá»…n.</li>
</ul>
<h2 id=2-schedules-lÃ -gÃ¬->2. Schedules lÃ  gÃ¬ ?</h2>
<p><img src=/images/Types-of-Schedules-in-DBMS.png alt=types-of-schedule></p>
<ul>
<li><strong>Schedule</strong>: LÃ  má»™t chuá»—i ná»‘i tiáº¿p cÃ¡c transaction, má»—i transaction thÃ¬ cÃ³ nhiá»u tasks.</li>
<li><strong>Serial Schedule</strong>: CÃ¡c transaction trong schedule Ä‘Æ°á»£c sáº¯p xáº¿p cÃ³ trÃ¬nh tá»±, Ä‘á»ƒ khi 1 transaction hoÃ n thÃ nh vÃ²ng Ä‘á»i cá»§a nÃ³ thÃ¬ transaction tiáº¿p theo má»›i Ä‘Æ°á»£c thá»±c thi. Schedule kiá»ƒu nÃ y Ä‘Æ°á»£c gá»i lÃ  schedule tuáº§n tá»±(serial schedule), vÃ¬ cÃ¡c transaction trong serial schedule Ä‘Æ°á»£c thá»±c thi 1 cÃ¡ch cÃ³ tuáº§n tá»±.</li>
<li><strong>Non-Serial Schedules</strong>: Nhiá»u transaction xáº£y ra Ä‘á»“ng thá»i. vÃ  cÃ¡c operations cá»§a transactions thÃ¬ cÃ³ tÃ¡c Ä‘á»™ng Ä‘áº¿n nhau.</li>
</ul>
<p>CÃ¡c serial schedules thÃ¬ cÃ³ cÃ¡c Ä‘áº·c tÃ­nh nhÆ°: consistent, recoverable, cascadeless(khÃ´ng xáº¿p táº§ng, chá»“ng cháº¥t lÃªn nhau), strict.</p>
<p>CÃ²n non-serial schedule thÃ¬ khÃ´ng pháº£i bao giá» cÅ©ng Ä‘áº¡t Ä‘Æ°á»£c nhá»¯ng tÃ­nh cháº¥t nhÆ° váº­y.</p>
<p>â“<strong>Serial schedule Ä‘áº£m báº£o nhÆ° váº­y, táº¡i sao chÃºng ta láº¡i cáº§n non-serial schedule.</strong></p>
<p>Dá»… hiá»ƒu khi trong serial schedule thÃ¬ cÃ¡c transaction Ä‘Æ°á»£c thá»±c hiá»‡n tá»«ng cÃ¡i 1 theo trÃ¬nh tá»±, T1 hoÃ n thÃ nh Ã²ng Ä‘á»i xong rá»“i má»›i Ä‘áº¿n T2 nÃªn ráº¥t lÃ  cháº­m, cÃ²n vá»›i non-serial schedule thÃ¬ cÃ¡c transaction xáº£y ra song song nÃªn ráº¥t nhanh, nhÆ°ng cÅ©ng vÃ¬ Ä‘Ã³ mÃ  khÃ´ng Ä‘áº¡t Ä‘Æ°á»£c nhá»¯ng tÃ­nh cháº¥t Ä‘á»ƒ Ä‘áº£m báº£o Ä‘Æ°á»£c cho database luÃ´n Ä‘Ãºng, váº­y nÃªn nhá»¯ng method loáº¡i bá» cÃ¡c váº¥n Ä‘á» vá» concurrency Ä‘Æ°á»£c táº¡o nÃªn nhÆ° trÃªn.</p>
<h2 id=3-serializability>3. Serializability</h2>
<p>NhÆ° á»Ÿ trÃªn chÃºng ta Ä‘Ã£ nÃ³i thÃ¬ chÃºng ta muá»‘n cháº¡y cÃ¡c transactions Ä‘á»“ng thá»i (concurrency) vÃ  cÅ©ng muá»‘n cÃ¡c káº¿t quáº£ sau khi thá»±c hiá»‡n cÃ¡c transactions nÃ y giá»‘ng vá»›i cÃ¡ch cá»§a serial schedule. Ta gá»i Ä‘iá»u nÃ y lÃ  <code>Serializability</code></p>
<p><img src=/images/Schedule-serializability.png alt=serializability-hierarchical></p>
<p>Äá»ƒ Ä‘áº¡t Ä‘Æ°á»£c serializability thÃ¬ schedules cáº§n Ä‘áº¡t Ä‘Æ°á»£c má»™t sá»‘ equivalences dÆ°á»›i Ä‘Ã¢y.</p>
<h2 id=4-equivalence-schedules---cÃ¡c-tÃ­nh-cháº¥t-tÆ°Æ¡ng-Ä‘Æ°Æ¡ng-giá»¯a-schedules>4. Equivalence Schedules - CÃ¡c tÃ­nh cháº¥t tÆ°Æ¡ng Ä‘Æ°Æ¡ng giá»¯a schedules</h2>
<p>2 schedules cÃ³ thá»ƒ tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá» máº·t result, view, conflict.</p>
<p><strong>1. Result Equivalence</strong>
<img src=/images/Equivalence-of-Schedules-Problem-01.png alt=serial-schedule>
Náº¿u 2 schedules Ä‘á»u cho káº¿t quáº£ giá»‘ng nhau sau khi Ä‘Æ°á»£c thá»±c thi thÃ¬ chÃºng Ä‘Æ°á»£c xem lÃ  <code>result equivalence</code>. ChÃºng cÃ³ thá»ƒ cho result giá»‘ng nhau á»Ÿ 1 vÃ i giÃ¡ trá»‹ nhÆ°ng cÅ©ng cÃ³ thá»ƒ khÃ¡c nhau á»Ÿ 1 vÃ i giÃ¡ trá»‹ khÃ¡c. VÃ¬ tháº¿ mÃ  loáº¡i nÃ y khÃ´ng cÃ³ nhiá»u Ã½ nghÄ©a.</p>
<p>á» hÃ¬nh trÃªn láº¥y X = 2 vÃ  Y = 5</p>
<ul>
<li>Káº¿t quáº£ cá»§a S1: X = 21 vÃ  Y = 10</li>
<li>Káº¿t quáº£ cá»§a S2: X = 21 vÃ  Y = 10</li>
<li>Káº¿t quáº£ cá»§a S3: X = 11 vÃ  Y = 10</li>
</ul>
<p>âœ”ï¸ Váº­y S1 vÃ  S2 result equivalence.</p>
<p><strong>2. Conflict equivalent</strong>
<img src=/images/Equivalence-of-Schedules-Problem-02.png alt=conflice-equivalent>
Náº¿u 2 schedules thá»a mÃ£n 2 Ä‘iá»u kiá»‡n dÆ°á»›i Ä‘Ã¢y thÃ¬ chÃºng confict equivalent.</p>
<ul>
<li>CÃ¡c transcation á»Ÿ 2 schedules lÃ  giá»‘ng nhau.</li>
<li>TrÃ¬nh tá»± cÃ¡c cáº·p task confict á»Ÿ 2 schedules lÃ  giÃ³ng nhau.</li>
</ul>
<p>NhÆ° tháº¿ nÃ o lÃ  1 cáº·p task conflict ?</p>
<p>CÃ¡c cáº·p task conflict lÃ  cáº·p task xáº£y ra trÃªn 2 transaction cÃ¹ng truy xuáº¥t vÃ  update Ä‘áº¿n 1 giÃ¡ trá»‹ cá»§a database. VÃ­ dá»¥ nhÆ° lÃ  T1 thá»±c hiá»‡n Read(X) vÃ  T2 láº¡i thá»±c hiá»‡n Write(X) khiáº¿n giÃ¡ trá»‹ cá»§a X lÃºc nÃ y á»Ÿ 2 transaction lÃ  khÃ¡c nhau. CÃ³ cÃ¡c cáº·p conflict nhÆ° sau: R1(X) W2(X); W1(X) R2(X) vÃ  W1(X) W2(X).</p>
<p>Quay láº¡i á»Ÿ vÃ­ dá»¥ trÃªn thÃ¬ Ä‘á»‘i vá»›i S1 thÃ¬ 2 transaction chá»‰ cÃ¹ng truy xuáº¥t vÃ  update dá»¯ liá»‡u cá»§a A, S2 cÅ©ng váº­y.</p>
<p>Äá»‘i vá»›i S1 thÃ¬ trÃ¬nh tá»± cÃ¡c cáº·p conflict nhÆ° sau:</p>
<ul>
<li>R1(A), W2(A)</li>
<li>W1(A), R2(A)</li>
<li>W1(A), W2(A)</li>
</ul>
<p>Äá»‘i vá»›i S2 thÃ¬ trÃ¬nh tá»± cÃ¡c cáº·p conflict nhÆ° sau:</p>
<ul>
<li>R1(A), W2(A)</li>
<li>W1(A), R2(A)</li>
<li>W1(A), W2(A)</li>
</ul>
<p>Váº­y á»Ÿ Ä‘Ã¢y ta cÃ³ nÃ³i S1 vÃ  S2 lÃ  cÃ¡c conflict
equivalent schedules.</p>
<p><strong>3. View Equivalence</strong>
2 schedules cÃ³ view equivalence khi Ä‘Ã¡p á»©ng 3 yÃªu cáº§u sau:</p>
<ul>
<li>Vá»›i má»—i data item X, náº¿u transaction Ti reads X tá»« tráº¡ng thÃ¡i Ä‘áº§u tiÃªn á»Ÿ S1, sau Ä‘Ã³ á»Ÿ S2, Ti cÅ©ng pháº£i reads X tá»« tráº¡ng thÃ¡i Ä‘áº§u tiÃªn. NghÄ©a lÃ  lÃºc Ti á»Ÿ S1 vÃ  S2 read X thÃ¬ chÃºng pháº£i cÃ³ giÃ¡ trá»‹ nhÆ° nhau.</li>
<li>Náº¿u transaction Ti reads 1 data item mÃ  Ä‘Ã£ Ä‘Æ°á»£c update bá»Ÿi 1 transaction Tj á»Ÿ S1, thÃ¬ á»Ÿ S2 transaction Ti cÅ©ng pháº£i reads Ä‘Æ°á»£c giÃ¡ trá»‹ tÆ°Æ¡ng Ä‘Æ°Æ¡ng sau khi Ä‘Ã£ Ä‘Æ°á»£c update bá»Ÿi 1 Tj khÃ¡c trong S2.</li>
<li>Vá»›i má»—i data item X, náº¿u X Ä‘Ã£ Ä‘Æ°á»£c update bá»Ÿi Ã­t nháº¥t 1 transaction Ti trong S1 thÃ¬ á»Ÿ S2 nÃ³ cÅ©ng pháº£i Ä‘Æ°á»£c update bá»Ÿi Ã­t nháº¥t 1 transaction Ti trong S2.</li>
</ul>
<p>CÃ¡c phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ kiá»ƒm tra xem 1 Schedule cÃ³ View Serializable hay khÃ´ng ?</p>
<ol>
<li>Kiá»ƒm tra xem schedule cÃ³ conflict serializable hay khÃ´ng ?</li>
</ol>
<ul>
<li>Náº¿u 1 schedule lÃ  conflict serializable thÃ¬ cháº¯c cháº¯n nÃ³ view serializable.</li>
<li>Náº¿u 1 schedule khÃ´ng conflict serializable thÃ¬ nÃ³ cÃ³ thá»ƒ hoáº·c khÃ´ng view serializable, vÃ  kiá»ƒm tra tiáº¿p theo bÆ°á»›c dÆ°á»›i Ä‘Ã¢y.</li>
</ul>
<ol start=2>
<li>Kiá»ƒm tra xem schedule cÃ³ tá»“n táº¡i nhá»¯ng blind write operation hay khÃ´ng?
Blind write operation lÃ  nhá»¯ng task thá»±c hiá»‡n viá»‡c ghi mÃ  khÃ´ng thá»±c hiá»‡n viá»‡c Ä‘á»c trÆ°á»›c Ä‘Ã³.</li>
</ol>
<ul>
<li>Náº¿u khÃ´ng tá»“n táº¡i, thÃ¬ cháº¯c cháº¯n khÃ´ng pháº£i view serializable.</li>
<li>Náº¿u cÃ³ tá»“n táº¡i, thÃ¬ kiá»ƒm tra theo bÆ°á»›c dÆ°á»›i Ä‘Ã¢y.</li>
</ul>
<ol start=3>
<li>DÃ¹ng nhá»¯ng yÃªu cáº§u Ä‘Ã£ nÃªu á»Ÿ trÃªn, viáº¿t láº¡i táº¥t cáº£ cÃ¡c dependencies, váº½ graph, náº¿u khÃ´ng cÃ³ vÃ²ng láº·p nÃ o trong graph thÃ¬ schedule Ä‘Ã³ lÃ  view serializable vÃ  ngÆ°á»£c láº¡i.</li>
</ol>
<h2 id=4-mÃ¬nh-hay-dÃ¹ng-postgres-váº­y-postgres-thÃ¬-serializability-nhÆ°-tháº¿-nÃ o->4. MÃ¬nh hay dÃ¹ng postgres, váº­y postgres thÃ¬ serializability nhÆ° tháº¿ nÃ o ?</h2>
<p>CÃ¢u nÃ y mÃ¬nh nghÄ© sáº½ tÃ¬m hiá»ƒu vÃ  tráº£ lá»i trong 1 bÃ i riÃªng vá» postgres ğŸ˜„</p>
</div>
</article>
<div class=blog-post-comments>
<div id=disqus_thread>
<script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,b='ducnguyen96',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#1-states-cá»§a-transactions>1. States cá»§a Transactions</a></li>
<li><a href=#2-schedules-lÃ -gÃ¬->2. Schedules lÃ  gÃ¬ ?</a></li>
<li><a href=#3-serializability>3. Serializability</a></li>
<li><a href=#4-equivalence-schedules---cÃ¡c-tÃ­nh-cháº¥t-tÆ°Æ¡ng-Ä‘Æ°Æ¡ng-giá»¯a-schedules>4. Equivalence Schedules - CÃ¡c tÃ­nh cháº¥t tÆ°Æ¡ng Ä‘Æ°Æ¡ng giá»¯a schedules</a></li>
<li><a href=#4-mÃ¬nh-hay-dÃ¹ng-postgres-váº­y-postgres-thÃ¬-serializability-nhÆ°-tháº¿-nÃ o->4. MÃ¬nh hay dÃ¹ng postgres, váº­y postgres thÃ¬ serializability nhÆ° tháº¿ nÃ o ?</a></li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&text=Transaction%20in%20a%20nutshell" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&title=Transaction%20in%20a%20nutshell" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&is_video=false&description=Transaction%20in%20a%20nutshell" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Transaction%20in%20a%20nutshell&body=Check out this article: %2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&title=Transaction%20in%20a%20nutshell" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&title=Transaction%20in%20a%20nutshell" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&name=Transaction%20in%20a%20nutshell&description=Transaction%20c%c3%b3%20th%e1%bb%83%20%c4%91%c6%b0%e1%bb%a3c%20%c4%91%e1%bb%8bnh%20ngh%c4%a9a%20l%c3%a0%201%20nh%c3%b3m%20task.%20M%e1%bb%99t%20task%20%c4%91%c6%a1n%20l%e1%ba%bb%20l%c3%a0%201%20%c4%91%c6%a1n%20v%e1%bb%8b%20x%e1%bb%ad%20l%c3%bd%20m%c3%a0%20kh%c3%b4ng%20th%e1%bb%83%20chia%20nh%e1%bb%8f%20h%c6%a1n%20n%e1%bb%afa.%0aL%e1%ba%a5y%20m%e1%bb%99t%20v%c3%ad%20d%e1%bb%a5%20%c4%91%c6%a1n%20gi%e1%ba%a3n.%20Gi%e1%ba%a3%20s%e1%bb%ad%20m%e1%bb%99t%20nh%c3%a2n%20vi%c3%aan%20ng%c3%a2n%20h%c3%a0ng%20chuy%e1%bb%83n%20500%20tri%e1%bb%87u%20t%e1%bb%ab%20t%c3%a0i%20kho%e1%ba%a3n%20A%20%c4%91%e1%ba%bfn%20t%c3%a0i%20kho%e1%ba%a3n%20B.%20%c4%90%c3%a2y%20l%c3%a0%20m%e1%bb%99t%20transaction%20%c4%91%c6%a1n%20gi%e1%ba%a3n%20ch%e1%bb%a9a%20nh%e1%bb%afng%20task%20sau%20%c4%91%c3%a2y.%0aA%26rsquo%3bs%20Account%0aOpen_Account%28A%29%20Old_Balance%20%3d%20A.balance%20New_Balance%20%3d%20Old_Balance%20-%20500%20A." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=%2fposts%2fdatabases%2ftransaction-in-a-nutshell%2f&t=Transaction%20in%20a%20nutshell" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2021 ducnguyen96
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Writings</a></li>
<li><a href=/categories>Categories</a></li>
<li><a href=/tags>Tags</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
</html>